-- MySQL Script generated by MySQL Workbench
-- чт, 13-лип-2017 15:45:04 +0300
-- Model: New Model    Version: 1.0
-- MySQL Workbench Forward Engineering

SET @OLD_UNIQUE_CHECKS=@@UNIQUE_CHECKS, UNIQUE_CHECKS=0;
SET @OLD_FOREIGN_KEY_CHECKS=@@FOREIGN_KEY_CHECKS, FOREIGN_KEY_CHECKS=0;
SET @OLD_SQL_MODE=@@SQL_MODE, SQL_MODE='TRADITIONAL,ALLOW_INVALID_DATES';

-- -----------------------------------------------------
-- Schema lazy_tracker
-- -----------------------------------------------------

-- -----------------------------------------------------
-- Schema lazy_tracker
-- -----------------------------------------------------
CREATE SCHEMA IF NOT EXISTS `lazy_tracker` DEFAULT CHARACTER SET utf8 ;
USE `lazy_tracker` ;

-- -----------------------------------------------------
-- Table `lazy_tracker`.`companies`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `lazy_tracker`.`companies` (
  `idcompanies` INT(11) NOT NULL,
  `name` VARCHAR(45) NULL DEFAULT NULL,
  PRIMARY KEY (`idcompanies`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8;


-- -----------------------------------------------------
-- Table `lazy_tracker`.`priorities`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `lazy_tracker`.`priorities` (
  `idpriority` INT(11) NOT NULL,
  `name` VARCHAR(45) NULL DEFAULT NULL,
  PRIMARY KEY (`idpriority`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8;


-- -----------------------------------------------------
-- Table `lazy_tracker`.`projects`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `lazy_tracker`.`projects` (
  `idproject` INT(11) NOT NULL,
  `company` INT(11) NULL DEFAULT NULL,
  `name` VARCHAR(45) NULL DEFAULT NULL,
  `description` VARCHAR(45) NULL DEFAULT NULL,
  PRIMARY KEY (`idproject`),
  INDEX `company_idx` (`company` ASC),
  CONSTRAINT `company`
    FOREIGN KEY (`company`)
    REFERENCES `lazy_tracker`.`companies` (`idcompanies`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8;


-- -----------------------------------------------------
-- Table `lazy_tracker`.`user_stories`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `lazy_tracker`.`user_stories` (
  `iduser_storie` INT(11) NOT NULL,
  `name` VARCHAR(45) NULL DEFAULT NULL,
  `description` VARCHAR(45) NULL DEFAULT NULL,
  `project` INT(11) NULL DEFAULT NULL,
  PRIMARY KEY (`iduser_storie`),
  INDEX `project_idx` (`project` ASC),
  CONSTRAINT `project`
    FOREIGN KEY (`project`)
    REFERENCES `lazy_tracker`.`projects` (`idproject`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8;


-- -----------------------------------------------------
-- Table `lazy_tracker`.`sprints`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `lazy_tracker`.`sprints` (
  `idsprint` INT(11) NOT NULL,
  `name` VARCHAR(45) NULL DEFAULT NULL,
  `goal` VARCHAR(45) NULL DEFAULT NULL,
  `date` DATE NULL DEFAULT NULL,
  `user_story` INT(11) NULL DEFAULT NULL,
  PRIMARY KEY (`idsprint`),
  INDEX `sprint_idx` (`user_story` ASC),
  CONSTRAINT `sprint`
    FOREIGN KEY (`user_story`)
    REFERENCES `lazy_tracker`.`user_stories` (`iduser_storie`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8;


-- -----------------------------------------------------
-- Table `lazy_tracker`.`states`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `lazy_tracker`.`states` (
  `idstate` INT(11) NOT NULL,
  `name` VARCHAR(45) NULL DEFAULT NULL,
  PRIMARY KEY (`idstate`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8;


-- -----------------------------------------------------
-- Table `lazy_tracker`.`types`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `lazy_tracker`.`types` (
  `idtype` INT(11) NOT NULL,
  `name` VARCHAR(45) NULL DEFAULT NULL,
  PRIMARY KEY (`idtype`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8;


-- -----------------------------------------------------
-- Table `lazy_tracker`.`responsibilities`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `lazy_tracker`.`responsibilities` (
  `idresponsibilities` INT NOT NULL,
  `name` VARCHAR(45) NULL,
  PRIMARY KEY (`idresponsibilities`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `lazy_tracker`.`users`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `lazy_tracker`.`users` (
  `idusers` INT NOT NULL,
  `responsibilities` INT NULL,
  `company` INT NULL,
  `login` VARCHAR(45) NULL,
  `password` VARCHAR(45) NULL,
  `name` VARCHAR(45) NULL,
  `e_mail` VARCHAR(45) NULL,
  `phone` VARCHAR(45) NULL,
  `position` VARCHAR(45) NULL,
  `project` INT NULL,
  PRIMARY KEY (`idusers`),
  INDEX `fk_users_1_idx` (`company` ASC),
  INDEX `fk_users_2_idx` (`project` ASC),
  INDEX `fk_users_3_idx` (`responsibilities` ASC),
  CONSTRAINT `fk_users_1`
    FOREIGN KEY (`company`)
    REFERENCES `lazy_tracker`.`companies` (`idcompanies`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_users_2`
    FOREIGN KEY (`project`)
    REFERENCES `lazy_tracker`.`projects` (`idproject`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_users_3`
    FOREIGN KEY (`responsibilities`)
    REFERENCES `lazy_tracker`.`responsibilities` (`idresponsibilities`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `lazy_tracker`.`issues`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `lazy_tracker`.`issues` (
  `idissue` INT NOT NULL,
  `sprint` INT NULL,
  `name` VARCHAR(45) NULL,
  `created_by` INT NULL,
  `priority` INT NULL,
  `type` INT NULL,
  `state` INT NULL,
  `sign` INT NULL,
  `story_points` VARCHAR(45) NULL,
  PRIMARY KEY (`idissue`),
  INDEX `fk_issues_1_idx` (`sprint` ASC),
  INDEX `fk_issues_2_idx` (`priority` ASC),
  INDEX `fk_issues_3_idx` (`type` ASC),
  INDEX `fk_issues_4_idx` (`state` ASC),
  INDEX `fk_issues_5_idx` (`created_by` ASC),
  INDEX `fk_issues_6_idx` (`sign` ASC),
  CONSTRAINT `fk_issues_1`
    FOREIGN KEY (`sprint`)
    REFERENCES `lazy_tracker`.`sprints` (`idsprint`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_issues_2`
    FOREIGN KEY (`priority`)
    REFERENCES `lazy_tracker`.`priorities` (`idpriority`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_issues_3`
    FOREIGN KEY (`type`)
    REFERENCES `lazy_tracker`.`types` (`idtype`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_issues_4`
    FOREIGN KEY (`state`)
    REFERENCES `lazy_tracker`.`states` (`idstate`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_issues_5`
    FOREIGN KEY (`created_by`)
    REFERENCES `lazy_tracker`.`users` (`idusers`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_issues_6`
    FOREIGN KEY (`sign`)
    REFERENCES `lazy_tracker`.`users` (`idusers`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


SET SQL_MODE=@OLD_SQL_MODE;
SET FOREIGN_KEY_CHECKS=@OLD_FOREIGN_KEY_CHECKS;
SET UNIQUE_CHECKS=@OLD_UNIQUE_CHECKS;
